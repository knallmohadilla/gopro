{"ast":null,"code":"var _jsxFileName = \"/home/vboxuser/Desktop/projects/task1/frontend/react/app/src/App.js\",\n  _s = $RefreshSig$();\nimport logo from './logo.svg';\nimport React, { useEffect, useState, useReducer } from 'react';\nimport { Buffer } from 'buffer';\nimport './App.css';\nimport { connect, StringCodec, JSONCodec } from \"nats.ws\";\n//import {useNats, useNatsSubscription} from \"./useNats.ts\"\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const style = {\n    margin: 5 + 'px',\n    width: 70 + 'px',\n    display: \"inline-block\",\n    fontSize: 14 + 'px'\n  };\n  const inputstyle = {\n    margin: 5 + 'px',\n    width: 105 + 'px',\n    display: \"inline-block\",\n    fontSize: 14 + 'px',\n    marginTop: 10 + 'px',\n    marginBottom: 20 + 'px'\n  };\n  const createstyle = {\n    margin: 5 + 'px',\n    width: 110 + 'px',\n    display: \"inline-block\",\n    fontSize: 14 + 'px'\n  };\n  const highstyle = {\n    margin: 5 + 'px',\n    width: 70 + 'px',\n    display: \"inline-block\",\n    background: \"green\",\n    color: \"white\",\n    fontSize: 14 + 'px'\n  };\n  const players = [\"Odin\", \"Loki\", \"Thor\", \"Freya\", \"Frigg\", \"Balder\", \"Heimdall\", \"Tyr\", \"Freyr\", \"Njord\"];\n  const sc = new StringCodec();\n  const jc = JSONCodec();\n  const [nats, setNats] = useState(undefined);\n  const [sub, setSub] = useState(undefined);\n  const [viewMessage, setViewMessage] = useState(\"\");\n  const [loadKV, setLoadKV] = useState(undefined);\n  const [games, setGames] = useState([]);\n  const [kv, setKV] = useState(undefined);\n  const [input, setInput] = useState(players[Math.floor(Math.random() * players.length)]);\n  const [userChoice, setUserChoice] = useState('');\n  //const nc = useNats();\n  const url = \"http://192.168.49.2\"; //window.location.href\n  const ip = \"http://\" + url.split(\"//\")[1].split(\"/\")[0];\n  console.log(ip);\n  useEffect(() => {\n    if (ip) {\n      (async () => {\n        const nc = await connect({\n          servers: [ip + \":30090\"] // ip = http://192.168.49.2\n        });\n        console.log(\"connected to NATS\");\n        const js = nc.jetstream();\n        const kv = await js.views.kv(\"Games\");\n        const watcher = await kv.watch({\n          key: \">\"\n        });\n        setKV(kv);\n        for await (const e of watcher) {\n          try {\n            const res = JSON.parse(String(Buffer.from(e.value).toString('utf8')));\n            setGames(prev => [...prev.filter(game => game.id !== res.id), res]);\n          } catch (error) {\n            console.log(\"error\");\n          }\n        }\n      })();\n    }\n    return () => {\n      nats === null || nats === void 0 ? void 0 : nats.drain();\n      console.log(\"closed NATS connection\");\n    };\n  }, [ip]);\n  const loadGames = e => {\n    setLoadKV(true);\n  };\n  const removeGame = async (e, id) => {\n    if (kv) {\n      setGames(prev => prev.filter(game => game.id !== id));\n      await kv.purge(id);\n    } else {\n      console.log(\"nokv\");\n    }\n  };\n  const joinGame = async (e, id) => {\n    if (kv) {\n      for (let i = 0; i < games.length; i++) {\n        if (games[i].id === id) {\n          if (games[i].playerA === \"\") {\n            if (games[i].playerB !== input) {\n              games[i].playerA = input;\n              setGames(prev => prev.filter(game => game.id !== games[i].id));\n              await kv.put(id, jc.encode(games[i]));\n            } else {\n              console.log(\"You are already in this game\");\n            }\n          } else {\n            if (games[i].playerA !== input) {\n              games[i].playerB = input;\n              setGames(prev => prev.filter(game => game.id !== games[i].id));\n              await kv.put(id, jc.encode(games[i]));\n            } else {\n              console.log(\"You are already in this game\");\n            }\n          }\n        }\n      }\n    } else {\n      console.log(\"nokv\");\n    }\n  };\n  const setChoice = async (e, id, player, choice) => {\n    try {\n      if (ip) {\n        const response = await fetch(ip + ':30034/choice', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            id: id,\n            player: player,\n            gameChoice: choice\n          })\n        });\n        let data = await response.json();\n        setGames(prev => [...prev.filter(game => game.id !== id), data]);\n        setUserChoice(choice);\n      }\n    } catch (error) {\n      console.log(\"error\");\n    }\n  };\n  const restartGame = async (e, id) => {\n    try {\n      if (ip) {\n        console.log(games.filter(game => game.id === id));\n        const response = await fetch(ip + ':30034/restart', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(games.filter(game => game.id === id)[0])\n        });\n        let data = await response.json();\n        console.log(data);\n        setGames(prev => [...prev.filter(game => game.id !== id), data]);\n      }\n    } catch (error) {\n      console.log(\"error\");\n    }\n  };\n  const createGame = async e => {\n    try {\n      const id = \"game\" + new Date().getUTCSeconds();\n      await kv.put(id, jc.encode({\n        \"id\": id,\n        \"playerA\": \"\",\n        \"playerB\": \"\",\n        \"choiceA\": \"\",\n        \"choiceB\": \"\",\n        \"winsA\": 0,\n        \"winsB\": 0,\n        \"gameFinished\": false\n      }));\n    } catch (error) {\n      console.log(\"error\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Rock, Paper, Scissors - Create or Join a Game, choose your Gesture, win or loose & repeat!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      style: style,\n      children: \"Username\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      style: inputstyle,\n      value: input,\n      type: \"text\",\n      onInput: e => setInput(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      style: createstyle,\n      type: \"button\",\n      onClick: e => createGame(e),\n      value: \"+ Add Game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      style: style,\n      children: \"Server: \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 8\n    }, this), games.map((game, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: style,\n        children: game.playerA === \"\" ? \"none\" : game.playerA + \"(\" + game.winsA + \")\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 13\n      }, this), \"vs.\", /*#__PURE__*/_jsxDEV(\"span\", {\n        style: style,\n        children: game.playerB === \"\" ? \"none\" : game.playerB + \"(\" + game.winsB + \")\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 113\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: style,\n        children: game.playerA === \"\" || game.playerB === \"\" ? /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"button\",\n          onClick: e => joinGame(e, game.id),\n          value: \"Join\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 60\n        }, this) : game.gameFinished ? /*#__PURE__*/_jsxDEV(\"input\", {\n          style: style,\n          type: \"button\",\n          onClick: e => restartGame(e, game.id),\n          value: \"restart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        style: game.playerA === input && game.choiceA === \"rock\" || game.playerB === input && game.choiceB === \"rock\" ? highstyle : style,\n        type: \"button\",\n        onClick: e => setChoice(e, game.id, input, \"rock\"),\n        value: \"rock\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        style: game.playerA === input && game.choiceA === \"paper\" || game.playerB === input && game.choiceB === \"paper\" ? highstyle : style,\n        type: \"button\",\n        onClick: e => setChoice(e, game.id, input, \"paper\"),\n        value: \"paper\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        style: game.playerA === input && game.choiceA === \"scissors\" || game.playerB === input && game.choiceB === \"scissors\" ? highstyle : style,\n        type: \"button\",\n        onClick: e => setChoice(e, game.id, input, \"scissors\"),\n        value: \"scissor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        style: style,\n        type: \"button\",\n        onClick: e => removeGame(e, game.id),\n        value: \"delete -\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 15\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 11\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 215,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"Ohum0XStAGli+gltUeub1OI+Lss=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["logo","React","useEffect","useState","useReducer","Buffer","connect","StringCodec","JSONCodec","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","style","margin","width","display","fontSize","inputstyle","marginTop","marginBottom","createstyle","highstyle","background","color","players","sc","jc","nats","setNats","undefined","sub","setSub","viewMessage","setViewMessage","loadKV","setLoadKV","games","setGames","kv","setKV","input","setInput","Math","floor","random","length","userChoice","setUserChoice","url","ip","split","console","log","nc","servers","js","jetstream","views","watcher","watch","key","e","res","JSON","parse","String","from","value","toString","prev","filter","game","id","error","drain","loadGames","removeGame","purge","joinGame","i","playerA","playerB","put","encode","setChoice","player","choice","response","fetch","method","headers","body","stringify","gameChoice","data","json","restartGame","createGame","Date","getUTCSeconds","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onInput","target","onClick","map","index","winsA","winsB","gameFinished","choiceA","choiceB","_c","$RefreshReg$"],"sources":["/home/vboxuser/Desktop/projects/task1/frontend/react/app/src/App.js"],"sourcesContent":["import logo from './logo.svg';\nimport React, {useEffect, useState, useReducer} from 'react';\nimport {Buffer} from 'buffer';\nimport './App.css';\nimport {\n  connect,\n  StringCodec,\n  JSONCodec\n} from \"nats.ws\";\n//import {useNats, useNatsSubscription} from \"./useNats.ts\"\n\n\n\nfunction App() {\n  const style = \n    {\n      margin: 5 + 'px',\n      width: 70 + 'px',\n      display: \"inline-block\",\n      fontSize: 14 + 'px',\n    }\n    const inputstyle = \n    {\n      margin: 5 + 'px',\n      width: 105 + 'px',\n      display: \"inline-block\",\n      fontSize: 14 + 'px',\n      marginTop:10 + 'px',\n      marginBottom:20 + 'px'\n    }\n    const createstyle = \n    {\n      margin: 5 + 'px',\n      width: 110 + 'px',\n      display: \"inline-block\",\n      fontSize: 14 + 'px',\n    }\n\n  const highstyle = \n    {\n      margin: 5 + 'px',\n      width: 70 + 'px',\n      display: \"inline-block\",\n      background: \"green\",\n      color: \"white\",\n      fontSize: 14 + 'px',\n    }\n  \n  const players = [\n    \"Odin\",\n    \"Loki\",\n    \"Thor\",\n    \"Freya\",\n    \"Frigg\",\n    \"Balder\",\n    \"Heimdall\",\n    \"Tyr\",\n    \"Freyr\",\n    \"Njord\",\n  ]\n  const sc = new StringCodec();\n  const jc = JSONCodec();\n  const [nats, setNats] = useState(undefined);\n  const [sub, setSub] = useState(undefined);\n  const [viewMessage, setViewMessage] = useState(\"\");\n  const [loadKV, setLoadKV] = useState(undefined);\n  const [games, setGames] = useState([]); \n  const [kv, setKV] = useState(undefined);\n  const [input, setInput] = useState(players[Math.floor(Math.random() * players.length)]);\n  const [userChoice, setUserChoice] = useState('');\n  //const nc = useNats();\n  const url = \"http://192.168.49.2\" //window.location.href\n  const ip = \"http://\" + url.split(\"//\")[1].split(\"/\")[0];\n  console.log(ip)\n\n  \n  useEffect(() => {\n    if(ip) {\n      (async () => {\n          const nc = await connect({\n            servers: [ip + \":30090\"], // ip = http://192.168.49.2\n          })\n          \n          console.log(\"connected to NATS\")\n          const js = nc.jetstream();\n          const kv = await js.views.kv(\"Games\");\n\n          const watcher = await kv.watch({\n            key: \">\",\n          });\n\n          setKV(kv);\n\n          for await (const e of watcher) {\n            try {\n              const res = JSON.parse(String(Buffer.from(e.value).toString('utf8')));\n              setGames(prev => [...prev.filter(game => game.id !== res.id), res] );\n            } catch (error) {\n              console.log(\"error\");\n            }\n          }\n        })();\n    }\n  \n    return () => {\n      nats?.drain();\n      console.log(\"closed NATS connection\")\n    }\n  }, [ip])\n  \n  const loadGames = (e) => {\n    setLoadKV(true);\n  }\n\n  const removeGame = async (e, id) => {\n    if(kv) {\n      setGames(prev => prev.filter(game => game.id !== id));\n      await kv.purge(id);\n    } else {\n      console.log(\"nokv\");\n    }\n  }\n\n  const joinGame = async (e, id) => {\n    if(kv) {\n      for(let i = 0; i < games.length; i++) {\n        if(games[i].id === id) {\n          if(games[i].playerA === \"\") {\n            if(games[i].playerB !== input) {\n              games[i].playerA = input;\n              setGames(prev => prev.filter(game => game.id !== games[i].id))\n              await kv.put(id, jc.encode(games[i]));\n              \n            } else {\n              console.log(\"You are already in this game\");\n            }\n          } else {\n            if(games[i].playerA !== input) {\n              games[i].playerB = input;\n              setGames(prev => prev.filter(game => game.id !== games[i].id))\n              await kv.put(id, jc.encode(games[i]));\n            } else {\n              console.log(\"You are already in this game\");\n            }\n          }\n        }\n      }\n    } else {\n      console.log(\"nokv\");\n    }\n  }\n\n  const setChoice = async (e, id, player, choice) => {\n    try {\n      if (ip) {\n        const response = await fetch(ip + ':30034/choice', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            id: id,\n            player: player,\n            gameChoice: choice\n          })\n        })\n        let data = await response.json();\n        setGames(prev => [...prev.filter(game => game.id !== id), data])\n        setUserChoice(choice)\n      }\n    } catch (error) {\n      console.log(\"error\");\n    }\n  }\n\n  const restartGame = async (e, id) => {\n    try {\n      if (ip) {\n        console.log(games.filter(game => game.id === id))\n        const response = await fetch(ip + ':30034/restart', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(games.filter(game => game.id === id)[0])\n        })\n        let data = await response.json();\n        console.log(data)\n        setGames(prev => [...prev.filter(game => game.id !== id), data])\n        }\n    } catch (error) {\n      console.log(\"error\");\n    }\n  }\n\n  const createGame = async (e) => {\n    try {\n      const id=\"game\" + new Date().getUTCSeconds()\n      await kv.put(id, jc.encode({\n        \"id\":id,\n        \"playerA\":\"\",\n        \"playerB\":\"\",\n        \"choiceA\":\"\",\n        \"choiceB\":\"\",\n        \"winsA\":0,\n        \"winsB\":0,\n        \"gameFinished\":false\n      }));\n    } catch (error) {\n      console.log(\"error\");\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      <h3>Rock, Paper, Scissors - Create or Join a Game, choose your Gesture, win or loose & repeat!</h3>\n      <span style={style}>Username</span>\n      {\n        <input style={inputstyle} value={input} type='text' onInput={e => setInput(e.target.value)}/>\n      }\n      {\n        <input style={createstyle}  type='button' onClick={(e) => createGame(e)} value=\"+ Add Game\"/>\n      }<span style={style}>Server: </span>\n      {\n        games.map((game, index) => (\n          <div key={index}>\n            <span style={style}>{game.playerA === \"\" ? \"none\" : game.playerA + \"(\" + game.winsA + \")\"}</span>vs.<span style={style}>{game.playerB === \"\" ? \"none\" : game.playerB + \"(\" + game.winsB + \")\"}</span>\n            <span style={style}>{\n              game.playerA === \"\" || game.playerB === \"\" ? <input type='button' onClick={(e) => joinGame(e, game.id)} value=\"Join\"/> : \n              game.gameFinished ?\n              <input style={style} type='button' onClick={(e) => restartGame(e, game.id)} value=\"restart\"/>\n              : <></>\n            }</span>\n            {\n              <input style={\n                (game.playerA === input && game.choiceA === \"rock\") \n                || (game.playerB === input && game.choiceB === \"rock\")  \n                ? highstyle \n                : style\n              }  type='button' onClick={(e) => setChoice(e, game.id, input, \"rock\")} value=\"rock\"/>\n            }\n            {\n              <input style={\n                (game.playerA === input && game.choiceA === \"paper\") \n                || (game.playerB === input && game.choiceB === \"paper\")  \n                ? highstyle \n                : style\n              }  type='button' onClick={(e) => setChoice(e, game.id, input, \"paper\")} value=\"paper\"/>\n            }\n            {\n              <input style={\n                (game.playerA === input && game.choiceA === \"scissors\") \n                || (game.playerB === input && game.choiceB === \"scissors\")  \n                ? highstyle \n                : style\n              }  type='button' onClick={(e) => setChoice(e, game.id, input, \"scissors\")} value=\"scissor\"/>\n            }\n            {\n              <input style={style} type='button' onClick={(e) => removeGame(e, game.id)} value=\"delete -\"/>\n            }\n          </div>\n        ))\n      }\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}